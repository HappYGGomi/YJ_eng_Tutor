# 여행 영어회화 연습 에이전트 프로그램 - 프로젝트 정책서

## 1. 프로젝트 개요

### 1.1 목적
여행지에서 발생할 수 있는 실제 상황별로 영어회화를 연습하고 익히기 위한 AI 기반 대화형 학습 프로그램

### 1.2 핵심 가치
- 실제 여행 상황 기반의 실전 영어 회화 연습
- 음성 인식 기반의 자연스러운 대화 경험
- AI 에이전트를 통한 자동화된 대화 진행 및 피드백

---

## 2. 화면 구성 및 레이아웃

### 2.1 전체 레이아웃
- **2단 패널 구조**: 왼쪽 패널(상황) + 오른쪽 패널(대화창)
- **반응형 디자인**: 다양한 화면 크기 지원

### 2.2 왼쪽 패널: "상황" (Situation Panel)
- **기능**: 여행 일정별 주요 코스 등록 및 표시
- **구조**:
  - 여행 일차별 그룹화 (예: "여행 1일차 : 2026.01.20")
  - 각 일차별 코스 목록 (코스1, 코스2, ...)
  - 코스 클릭 시 상호작용 가능
- **표시 정보**:
  - 일차 및 날짜
  - 코스 번호 및 코스 내용 (예: "코스1: 스페인 공항도착")

### 2.3 오른쪽 패널: "대화창" (Conversation Panel)
- **기능**: 선택된 코스에 대한 영어 회화 연습 진행
- **구성 요소**:
  - **Question 영역**: 질문 표시/입력 필드
  - **Answer 영역**: 답변 표시/입력 필드
  - **대화 히스토리**: 진행된 대화 내용 표시
  - **하단 버튼**:
    - "저장하기" (Save): 현재 대화 내용 저장
    - "반복하기" (Repeat): 동일한 코스로 다시 연습 시작

---

## 3. 핵심 기능 명세

### 3.1 코스 등록 및 관리
- **기능**: 사용자가 화면에서 직접 여행 일정별 코스를 등록/수정/삭제
- **등록 방식**: 화면에서 직접 입력하는 방식
- **데이터 구조**:
  - 일차 정보 (날짜 포함)
  - 코스 번호
  - 코스 내용 (상황 설명)
- **UI 구성**:
  - 일차 추가 버튼
  - 코스 추가 버튼 (각 일차별)
  - 코스 수정/삭제 기능

### 3.2 코스 선택 및 질문 순서 설정
- **동작 흐름**:
  1. 사용자가 왼쪽 패널에서 코스 클릭
  2. 질문 순서 선택 모달/팝업 표시 (매번 선택)
     - 옵션 1: "사용자가 먼저 질문하기"
     - 옵션 2: "에이전트가 먼저 질문하기" (사용자가 먼저 답변하기)
  3. 선택 완료 시 오른쪽 대화창 활성화
  4. 선택된 코스 내용과 질문 순서에 따라 대화 시작

### 3.3 음성 인식 기능
- **우선순위**: 음성 인식이 기본 입력 방식
- **지원 기능**:
  - 실시간 음성 인식 (Web Speech API 또는 유사 기술)
  - 기본 언어: 영어
  - 키보드 입력도 병행 지원
  - 음성 입력 시작/종료 버튼
- **적용 시점**:
  - 사용자가 먼저 말할 때
  - 사용자가 에이전트 질문에 답변할 때
- **한국어 지원**:
  - 사용자가 영어로 답변을 못할 경우 한국어로 말할 수 있음
  - 한국어 입력 시 에이전트가 해당 내용을 영어로 변환하여 제시
  - 사용자가 제시된 영어 표현으로 다시 답변할 수 있도록 안내

### 3.4 AI 에이전트 음성 출력
- **음성 합성**: TTS (Text-to-Speech) 기술 사용
- **음성 특성**:
  - 성별: 남성/여성 랜덤 선택 (특정 비율 없음)
  - 억양: 표준 미국 영어 (Standard American English)
  - 톤: 평범한 여행지 현지인처럼 자연스러운 목소리
  - 언어: 영어
- **랜덤화**: 각 대화 세션 시작 시 또는 코스별로 랜덤 선택

### 3.5 AI 기반 자동 대화 진행
- **AI 엔진**: Claude AI API 활용
- **대화 생성 로직**:
  - 선택된 코스의 상황 정보를 컨텍스트로 제공
  - 질문 순서 설정에 따라 대화 흐름 제어
  - 사용자 입력에 대한 자연스러운 응답 생성
  - 상황에 맞는 적절한 질문/답변 생성
- **대화 품질**:
  - 자연스러운 대화 흐름
  - 여행 상황에 적합한 표현 사용
  - 교육적 가치가 있는 대화 내용

### 3.6 대화 내용 표시
- **표시 위치**: 오른쪽 대화창
- **표시 형식**:
  - 대화 히스토리 형태 (채팅 인터페이스)
  - 사용자 발화와 에이전트 발화 구분
  - 시간 정보 포함 (선택사항)
- **실시간 업데이트**: 대화가 진행되는 동안 실시간으로 화면에 반영

### 3.7 대화 저장 및 재연습
- **저장하기 기능**:
  - 현재 대화 세션 전체 저장
  - 저장 형식: 웹 저장소 (LocalStorage / IndexedDB)
  - 저장 정보:
    - 코스 정보
    - 질문 순서 설정
    - 전체 대화 내용
    - 날짜/시간
- **저장된 대화 조회**:
  - 저장된 대화 목록 조회 기능
  - 저장된 대화 상세 보기
  - 저장된 대화를 기반으로 반복 학습 가능
- **반복하기 기능**:
  - 동일한 코스와 설정으로 새로운 대화 세션 시작
  - 이전 대화 내용 초기화
  - 새로운 AI 음성 랜덤 선택

### 3.8 오답 처리 및 피드백 시스템
- **1차 오답 처리**:
  - 사용자 답변이 의미를 알 수 없을 정도로 엉망인 경우
  - 에이전트가 친절하게 같은 질문을 다시 물어봄
  - 힌트 제공 (선택사항)
- **2차 오답 처리**:
  - 동일한 질문에 대해 두 번째 답변도 의미를 알 수 없을 정도로 엉망인 경우
  - 모범 답변 예시를 화면에 표시
  - 사용자가 모범 답변을 따라 말할 수 있도록 유도
  - 모범 답변 음성 재생 옵션 제공
- **오답 판단 기준**:
  - **통과 기준**: 의미 전달이 되면 통과
  - **오답 기준**: 의미를 알 수 없을 정도로 엉망인 경우만 오답 처리
  - (Claude AI를 통한 자동 판단)

---

## 4. 기술 스택

### 4.1 프론트엔드
- **프레임워크**: React / Next.js (웹 애플리케이션)
- **UI 라이브러리**: Tailwind CSS (스페인 여행 테마 반영)
- **음성 인식**: Web Speech API (SpeechRecognition)
- **음성 합성**: Web Speech API (SpeechSynthesis) - 표준 미국 영어
- **상태 관리**: React Context API 또는 Zustand

### 4.2 백엔드
- **API 서버**: Next.js API Routes 또는 Node.js Express
- **AI 통합**: Anthropic Claude API
- **API 키 관리**: 환경 변수 파일 (.env)에 저장
- **데이터 저장**: 
  - 웹 저장소: LocalStorage / IndexedDB (브라우저 기반)
  - 온라인 전용 (인터넷 연결 필수)

### 4.3 배포
- **개발 환경**: Cursor에서 개발
- **버전 관리**: GitHub
- **배포 플랫폼**: Lovable AI (GitHub 레포지토리 연동)
- **배포 방식**: 
  1. Cursor에서 코드 작성
  2. GitHub에 푸시
  3. Lovable AI에서 GitHub 레포지토리 연결하여 서비스 제공

---

## 5. 데이터 모델

### 5.1 여행 일정 (Travel Itinerary)
```json
{
  "id": "uuid",
  "day": 1,
  "date": "2026-01-20",
  "courses": [
    {
      "id": "uuid",
      "courseNumber": 1,
      "title": "스페인 공항도착",
      "description": "상세 설명",
      "questionOrder": "user_first" | "agent_first"
    }
  ]
}
```

### 5.2 대화 세션 (Conversation Session)
```json
{
  "id": "uuid",
  "courseId": "uuid",
  "courseTitle": "스페인 공항도착",
  "questionOrder": "user_first",
  "voiceGender": "male" | "female",
  "messages": [
    {
      "role": "user" | "agent",
      "content": "대화 내용",
      "timestamp": "2026-01-20T10:00:00Z",
      "isVoice": true,
      "isCorrect": true,
      "isKorean": false
    }
  ],
  "createdAt": "2026-01-20T10:00:00Z",
  "savedAt": "2026-01-20T10:30:00Z"
}
```

### 5.3 저장된 대화 목록 (Saved Conversations)
```json
{
  "savedConversations": [
    {
      "id": "uuid",
      "courseTitle": "스페인 공항도착",
      "date": "2026-01-20",
      "preview": "대화 미리보기...",
      "createdAt": "2026-01-20T10:00:00Z"
    }
  ]
}
```

---

## 6. 사용자 플로우

### 6.1 초기 설정
1. 사용자가 여행 일정 등록
2. 각 코스별 내용 입력
3. (선택사항) 질문 순서 미리 설정

### 6.2 대화 연습 세션
1. 왼쪽 패널에서 코스 선택
2. 질문 순서 선택 (사용자 먼저 / 에이전트 먼저)
3. 오른쪽 대화창에서 대화 시작
4. 음성 또는 텍스트로 대화 진행
5. 오답 시 피드백 받기
6. 대화 완료 후 저장 또는 반복 연습

---

## 7. UI/UX 디자인 가이드

### 7.1 사용자 프로필
- **사용자**: 40대 쾌활한 여성
- **사용 목적**: 스페인 여행 영어 회화 연습
- **성향**: 쾌활하고 밝은 성격

### 7.2 디자인 컨셉
- **테마**: 스페인 여행 분위기
- **색상 팔레트**:
  - 주 색상: 스페인 국기 색상에서 영감 (빨강, 노랑) 또는 스페인 건축물의 따뜻한 톤
  - 보조 색상: 지중해 블루, 따뜻한 오렌지/코랄
  - 배경: 스페인 풍경 이미지 또는 그라데이션
- **분위기**: 
  - 쾌활하고 밝은 느낌
  - 여행의 설렘과 즐거움을 표현
  - 친근하고 접근하기 쉬운 인터페이스
- **타이포그래피**: 
  - 읽기 쉬운 폰트
  - 친근한 느낌의 라운드한 폰트 사용 고려

### 7.3 레이아웃 세부사항
- **왼쪽 패널 (상황)**:
  - 스페인 여행 일정 카드 형태로 표시
  - 코스별로 클릭 가능한 카드 디자인
  - 호버 효과 및 선택 상태 시각화
- **오른쪽 패널 (대화창)**:
  - 채팅 인터페이스 스타일
  - 사용자 메시지와 에이전트 메시지 구분
  - 음성 입력 버튼을 눈에 띄게 배치
  - 스페인 분위기의 배경 또는 액센트

---

## 8. 개발 단계

### Phase 1: 기본 구조 및 UI
- Next.js 프로젝트 초기 설정
- 레이아웃 구성 (2단 패널)
- 스페인 여행 테마 디자인 적용
- 코스 등록/수정/삭제 UI
- 기본 대화창 UI

### Phase 2: 코스 관리 기능
- 코스 등록 기능 구현
- 일차별 코스 관리
- 코스 선택 기능
- 질문 순서 선택 모달

### Phase 3: 음성 기능
- Web Speech API 음성 인식 통합
- 영어 음성 인식 설정
- 한국어 음성 인식 (보조)
- Web Speech API 음성 합성 통합
- 표준 미국 영어 TTS 설정
- 남성/여성 랜덤 음성 선택
- 음성 입력/출력 UI

### Phase 4: AI 통합
- Claude API 연동
- 환경 변수 설정 (.env)
- 대화 생성 로직
- 상황별 컨텍스트 처리
- 질문 순서에 따른 대화 흐름 제어
- 한국어 입력 시 영어 변환 로직

### Phase 5: 피드백 시스템
- 오답 감지 (의미 전달 기준)
- 1차 오답 시 재질문
- 2차 오답 시 모범 답변 표시
- 모범 답변 음성 재생

### Phase 6: 저장 및 관리
- 대화 저장 기능 (웹 저장소)
- 저장된 대화 목록 조회
- 저장된 대화 상세 보기
- 반복 연습 기능

### Phase 7: 최적화 및 배포
- 성능 최적화
- 반응형 디자인 완성
- GitHub 레포지토리 설정
- Lovable AI 연동 준비
- 배포

---

## 9. 향후 확장 가능성

- 여러 언어 지원 (스페인어, 프랑스어 등)
- 다양한 여행 상황 템플릿 제공
- 학습 진도 추적 및 통계
- 사용자 간 대화 공유
- 모바일 앱 버전

---

## 10. 기술 요구사항 상세

### 10.1 환경 설정
- **Claude API 키**: `.env.local` 파일에 저장
  ```
  NEXT_PUBLIC_CLAUDE_API_KEY=your_api_key_here
  ```
- **GitHub 연동**: 
  - Cursor에서 개발 후 GitHub에 푸시
  - Lovable AI에서 GitHub 레포지토리 연결
  - **참고**: Lovable AI는 GitHub와의 연동을 지원하여 생성된 코드를 GitHub 저장소에 자동으로 푸시하고, 이를 통해 버전 관리 및 배포를 용이하게 합니다.

### 10.2 데이터 저장 구조
- **LocalStorage 사용**:
  - 여행 일정 데이터
  - 저장된 대화 목록
- **IndexedDB 사용** (선택사항):
  - 대용량 대화 데이터
  - 오프라인 지원 (향후 확장)

### 10.3 API 통합
- **Claude API**:
  - 모델: Claude 3.5 Sonnet 또는 최신 버전
  - 엔드포인트: `/api/chat` (Next.js API Route)
  - 요청 형식: JSON
  - 응답 형식: Streaming 또는 일반 응답

---

## 11. 확인 완료 사항

### ✅ 기능 관련
1. **코스 등록**: 화면에서 직접 등록 ✓
2. **질문 순서**: 코스 선택 시 매번 선택 ✓
3. **음성 인식**: 영어 기본, 한국어 보조 지원 ✓
4. **AI 음성**: 표준 미국 영어, 남성/여성 랜덤 ✓
5. **대화 저장**: 저장된 대화 조회 및 반복 학습 가능 ✓
6. **오답 판단**: 의미 전달 기준 (엄격하지 않음) ✓

### ✅ 기술 관련
1. **플랫폼**: 웹 애플리케이션 ✓
2. **온라인**: 온라인 전용 ✓
3. **Claude API**: 환경 설정 파일에 저장 ✓
4. **데이터 저장**: 웹 저장소 사용 ✓

### ✅ UI/UX 관련
1. **사용자**: 40대 쾌활한 여성 ✓
2. **테마**: 스페인 여행 분위기 ✓
3. **디자인**: 쾌활하고 밝은 느낌 ✓

---

**작성일**: 2025-01-XX
**최종 업데이트**: 2025-01-XX
**버전**: 2.0

